{"version":3,"file":"static/webpack/static/development/pages/sell.js.b43c0a94bf5694663209.hot-update.js","sources":["webpack:///./components/IsAuthenticated.js","webpack:///./components/SellForm.js"],"sourcesContent":["import { Query } from 'react-apollo';\nimport { CURRENT_USER_QUERY } from './User';\nimport SignIn from './Signin';\n\nconst IsAuthenticated = props => (\n\t<Query query={CURRENT_USER_QUERY}>\n\t\t{({ data, loading }) => {\n\t\t\tif (loading) return <p>Loading...</p>;\n\t\t\tif (!data.currentUser) {\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p>Please Sign In</p>\n\t\t\t\t\t\t<SignIn />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn props.children;\n\t\t}}\n\t</Query>\n);\n\nexport default IsAuthenticated;\n","import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Router from 'next/router';\nimport Form from './styles/Form';\nimport { Title } from './Item';\nimport { ALL_ITEMS_QUERY } from './Items';\nimport IsAuthenticated from './IsAuthenticated';\n\nconst CREATE_ITEM_MUTATION = gql`\n\tmutation CREATE_ITEM_MUTATION(\n\t\t$title: String!\n\t\t$description: String!\n\t\t$image: String!\n\t\t$maxDays: Int\n\t) {\n\t\tcreateItem(\n\t\t\ttitle: $title\n\t\t\tdescription: $description\n\t\t\timage: $image\n\t\t\tmaxDays: $maxDays\n\t\t) {\n\t\t\tid\n\t\t}\n\t}\n`;\n\nclass SellForm extends Component {\n\tstate = {\n\t\ttitle: '',\n\t\tdescription: '',\n\t\timage: '',\n\t\tmaxDays: 7\n\t};\n\n\thandleChange = e => {\n\t\tconst { name, type, value } = e.target;\n\t\tconst val = type === 'number' ? parseFloat(value) : value;\n\t\tthis.setState({ [name]: val });\n\t};\n\n\tuploadFile = async e => {\n\t\tconst files = e.target.files;\n\t\tconst data = new FormData();\n\t\tdata.append('file', files[0]);\n\t\tdata.append('upload_preset', 'borrowit');\n\n\t\tconst res = await fetch(\n\t\t\t'https://api.cloudinary.com/v1_1/maxeulercloud/image/upload',\n\t\t\t{\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: data\n\t\t\t}\n\t\t);\n\t\tconst file = await res.json();\n\t\tthis.setState({\n\t\t\timage: file.secure_url\n\t\t});\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<IsAuthenticated>\n\t\t\t\t<Mutation\n\t\t\t\t\tmutation={CREATE_ITEM_MUTATION}\n\t\t\t\t\tvariables={this.state}\n\t\t\t\t\trefetchQueries={[{ query: ALL_ITEMS_QUERY }]}\n\t\t\t\t>\n\t\t\t\t\t{(createItem, { loading, error }) => (\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<Title>Borrow Your Stuff! ðŸš€</Title>\n\t\t\t\t\t\t\t<Form\n\t\t\t\t\t\t\t\tonSubmit={async e => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tconst res = await createItem();\n\t\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t\t\tRouter.push({\n\t\t\t\t\t\t\t\t\t\tpathname: '/item',\n\t\t\t\t\t\t\t\t\t\tquery: { id: res.data.createItem.id }\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"title\">\n\t\t\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Title\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"image\">\n\t\t\t\t\t\t\t\t\t\tImage\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"image\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Upload An Image\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.uploadFile}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{this.state.image && (\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={this.state.image}\n\t\t\t\t\t\t\t\t\t\t\t\twidth=\"200\"\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"Upload Preview\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"description\">\n\t\t\t\t\t\t\t\t\t\tDescription\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholer=\"Enter a description\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.description}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"maxDays\">\n\t\t\t\t\t\t\t\t\t\tMax Days\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"maxDays\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.maxDays}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<button type=\"submit\">Upload{loading ? 'ing' : ''}</button>\n\t\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t)}\n\t\t\t\t</Mutation>\n\t\t\t</IsAuthenticated>\n\t\t);\n\t}\n}\n\nexport default SellForm;\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAbA;AACA;AAgBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAiBA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AASA;AACA;AAFA;AACA;AATA;AAMA;AANA;AAAA;AACA;AADA;AAaA;AACA;AAAA;AACA;AADA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAkBA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA/DA;AAuEA;;;;AAhHA;AACA;AAkHA;;;;A","sourceRoot":""}